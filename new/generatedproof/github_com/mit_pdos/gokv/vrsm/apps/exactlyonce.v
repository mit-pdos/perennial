(* autogenerated by goose proofgen; do not modify *)
Require Export New.proof.grove_prelude.
Require Export New.generatedproof.github_com.goose_lang.std.
Require Export New.generatedproof.github_com.mit_pdos.gokv.grove_ffi.
Require Export New.generatedproof.github_com.mit_pdos.gokv.map_marshal.
Require Export New.generatedproof.github_com.mit_pdos.gokv.vrsm.clerk.
Require Export New.generatedproof.github_com.mit_pdos.gokv.vrsm.storage.
Require Export New.generatedproof.github_com.tchajed.marshal.
Require Export New.golang.theory.
Require Export New.code.github_com.mit_pdos.gokv.vrsm.apps.exactlyonce.

Set Default Proof Using "Type".

Module exactlyonce.
Module eStateMachine.
Section def.

Context `{!heapGS Σ}.
Context {sem : go.Semantics}.
Context {package_sem' : exactlyonce.Assumptions}.

Local Set Default Proof Using "All".

#[global]Program Instance eStateMachine_typed_pointsto  :
  TypedPointsto (Σ:=Σ) (exactlyonce.eStateMachine.t) :=
  {|
    typed_pointsto_def l v dq :=
      (
      "lastSeq" ∷ l.[(exactlyonce.eStateMachine.t), "lastSeq"] ↦{dq} v.(exactlyonce.eStateMachine.lastSeq') ∗
      "lastReply" ∷ l.[(exactlyonce.eStateMachine.t), "lastReply"] ↦{dq} v.(exactlyonce.eStateMachine.lastReply') ∗
      "nextCID" ∷ l.[(exactlyonce.eStateMachine.t), "nextCID"] ↦{dq} v.(exactlyonce.eStateMachine.nextCID') ∗
      "sm" ∷ l.[(exactlyonce.eStateMachine.t), "sm"] ↦{dq} v.(exactlyonce.eStateMachine.sm') ∗
      "esmNextIndex" ∷ l.[(exactlyonce.eStateMachine.t), "esmNextIndex"] ↦{dq} v.(exactlyonce.eStateMachine.esmNextIndex') ∗
      "_" ∷ True
      )%I
  |}.
Final Obligation. solve_typed_pointsto_agree. Qed.

#[global] Instance eStateMachine_into_val_typed
   :
  IntoValTypedUnderlying (exactlyonce.eStateMachine.t) (exactlyonce.eStateMachineⁱᵐᵖˡ).
Proof. solve_into_val_typed_struct. Qed.
#[global] Instance eStateMachine_access_load_lastSeq l (v : (exactlyonce.eStateMachine.t)) dq :
  AccessStrict
    (l.[(exactlyonce.eStateMachine.t), "lastSeq"] ↦{dq} (v.(exactlyonce.eStateMachine.lastSeq')))
    (l.[(exactlyonce.eStateMachine.t), "lastSeq"] ↦{dq} (v.(exactlyonce.eStateMachine.lastSeq')))
    (l ↦{dq} v) (l ↦{dq} v)%I.
Proof. solve_pointsto_access_struct. Qed.

#[global] Instance eStateMachine_access_store_lastSeq l (v : (exactlyonce.eStateMachine.t)) lastSeq' :
  AccessStrict
    (l.[(exactlyonce.eStateMachine.t), "lastSeq"] ↦ (v.(exactlyonce.eStateMachine.lastSeq')))
    (l.[(exactlyonce.eStateMachine.t), "lastSeq"] ↦ lastSeq')
    (l ↦ v) (l ↦ (v <|(exactlyonce.eStateMachine.lastSeq') := lastSeq'|>))%I.
Proof. solve_pointsto_access_struct. Qed.
#[global] Instance eStateMachine_access_load_lastReply l (v : (exactlyonce.eStateMachine.t)) dq :
  AccessStrict
    (l.[(exactlyonce.eStateMachine.t), "lastReply"] ↦{dq} (v.(exactlyonce.eStateMachine.lastReply')))
    (l.[(exactlyonce.eStateMachine.t), "lastReply"] ↦{dq} (v.(exactlyonce.eStateMachine.lastReply')))
    (l ↦{dq} v) (l ↦{dq} v)%I.
Proof. solve_pointsto_access_struct. Qed.

#[global] Instance eStateMachine_access_store_lastReply l (v : (exactlyonce.eStateMachine.t)) lastReply' :
  AccessStrict
    (l.[(exactlyonce.eStateMachine.t), "lastReply"] ↦ (v.(exactlyonce.eStateMachine.lastReply')))
    (l.[(exactlyonce.eStateMachine.t), "lastReply"] ↦ lastReply')
    (l ↦ v) (l ↦ (v <|(exactlyonce.eStateMachine.lastReply') := lastReply'|>))%I.
Proof. solve_pointsto_access_struct. Qed.
#[global] Instance eStateMachine_access_load_nextCID l (v : (exactlyonce.eStateMachine.t)) dq :
  AccessStrict
    (l.[(exactlyonce.eStateMachine.t), "nextCID"] ↦{dq} (v.(exactlyonce.eStateMachine.nextCID')))
    (l.[(exactlyonce.eStateMachine.t), "nextCID"] ↦{dq} (v.(exactlyonce.eStateMachine.nextCID')))
    (l ↦{dq} v) (l ↦{dq} v)%I.
Proof. solve_pointsto_access_struct. Qed.

#[global] Instance eStateMachine_access_store_nextCID l (v : (exactlyonce.eStateMachine.t)) nextCID' :
  AccessStrict
    (l.[(exactlyonce.eStateMachine.t), "nextCID"] ↦ (v.(exactlyonce.eStateMachine.nextCID')))
    (l.[(exactlyonce.eStateMachine.t), "nextCID"] ↦ nextCID')
    (l ↦ v) (l ↦ (v <|(exactlyonce.eStateMachine.nextCID') := nextCID'|>))%I.
Proof. solve_pointsto_access_struct. Qed.
#[global] Instance eStateMachine_access_load_sm l (v : (exactlyonce.eStateMachine.t)) dq :
  AccessStrict
    (l.[(exactlyonce.eStateMachine.t), "sm"] ↦{dq} (v.(exactlyonce.eStateMachine.sm')))
    (l.[(exactlyonce.eStateMachine.t), "sm"] ↦{dq} (v.(exactlyonce.eStateMachine.sm')))
    (l ↦{dq} v) (l ↦{dq} v)%I.
Proof. solve_pointsto_access_struct. Qed.

#[global] Instance eStateMachine_access_store_sm l (v : (exactlyonce.eStateMachine.t)) sm' :
  AccessStrict
    (l.[(exactlyonce.eStateMachine.t), "sm"] ↦ (v.(exactlyonce.eStateMachine.sm')))
    (l.[(exactlyonce.eStateMachine.t), "sm"] ↦ sm')
    (l ↦ v) (l ↦ (v <|(exactlyonce.eStateMachine.sm') := sm'|>))%I.
Proof. solve_pointsto_access_struct. Qed.
#[global] Instance eStateMachine_access_load_esmNextIndex l (v : (exactlyonce.eStateMachine.t)) dq :
  AccessStrict
    (l.[(exactlyonce.eStateMachine.t), "esmNextIndex"] ↦{dq} (v.(exactlyonce.eStateMachine.esmNextIndex')))
    (l.[(exactlyonce.eStateMachine.t), "esmNextIndex"] ↦{dq} (v.(exactlyonce.eStateMachine.esmNextIndex')))
    (l ↦{dq} v) (l ↦{dq} v)%I.
Proof. solve_pointsto_access_struct. Qed.

#[global] Instance eStateMachine_access_store_esmNextIndex l (v : (exactlyonce.eStateMachine.t)) esmNextIndex' :
  AccessStrict
    (l.[(exactlyonce.eStateMachine.t), "esmNextIndex"] ↦ (v.(exactlyonce.eStateMachine.esmNextIndex')))
    (l.[(exactlyonce.eStateMachine.t), "esmNextIndex"] ↦ esmNextIndex')
    (l ↦ v) (l ↦ (v <|(exactlyonce.eStateMachine.esmNextIndex') := esmNextIndex'|>))%I.
Proof. solve_pointsto_access_struct. Qed.

End def.
End eStateMachine.

Module Clerk.
Section def.

Context `{!heapGS Σ}.
Context {sem : go.Semantics}.
Context {package_sem' : exactlyonce.Assumptions}.

Local Set Default Proof Using "All".

#[global]Program Instance Clerk_typed_pointsto  :
  TypedPointsto (Σ:=Σ) (exactlyonce.Clerk.t) :=
  {|
    typed_pointsto_def l v dq :=
      (
      "ck" ∷ l.[(exactlyonce.Clerk.t), "ck"] ↦{dq} v.(exactlyonce.Clerk.ck') ∗
      "cid" ∷ l.[(exactlyonce.Clerk.t), "cid"] ↦{dq} v.(exactlyonce.Clerk.cid') ∗
      "seq" ∷ l.[(exactlyonce.Clerk.t), "seq"] ↦{dq} v.(exactlyonce.Clerk.seq') ∗
      "_" ∷ True
      )%I
  |}.
Final Obligation. solve_typed_pointsto_agree. Qed.

#[global] Instance Clerk_into_val_typed
   :
  IntoValTypedUnderlying (exactlyonce.Clerk.t) (exactlyonce.Clerkⁱᵐᵖˡ).
Proof. solve_into_val_typed_struct. Qed.
#[global] Instance Clerk_access_load_ck l (v : (exactlyonce.Clerk.t)) dq :
  AccessStrict
    (l.[(exactlyonce.Clerk.t), "ck"] ↦{dq} (v.(exactlyonce.Clerk.ck')))
    (l.[(exactlyonce.Clerk.t), "ck"] ↦{dq} (v.(exactlyonce.Clerk.ck')))
    (l ↦{dq} v) (l ↦{dq} v)%I.
Proof. solve_pointsto_access_struct. Qed.

#[global] Instance Clerk_access_store_ck l (v : (exactlyonce.Clerk.t)) ck' :
  AccessStrict
    (l.[(exactlyonce.Clerk.t), "ck"] ↦ (v.(exactlyonce.Clerk.ck')))
    (l.[(exactlyonce.Clerk.t), "ck"] ↦ ck')
    (l ↦ v) (l ↦ (v <|(exactlyonce.Clerk.ck') := ck'|>))%I.
Proof. solve_pointsto_access_struct. Qed.
#[global] Instance Clerk_access_load_cid l (v : (exactlyonce.Clerk.t)) dq :
  AccessStrict
    (l.[(exactlyonce.Clerk.t), "cid"] ↦{dq} (v.(exactlyonce.Clerk.cid')))
    (l.[(exactlyonce.Clerk.t), "cid"] ↦{dq} (v.(exactlyonce.Clerk.cid')))
    (l ↦{dq} v) (l ↦{dq} v)%I.
Proof. solve_pointsto_access_struct. Qed.

#[global] Instance Clerk_access_store_cid l (v : (exactlyonce.Clerk.t)) cid' :
  AccessStrict
    (l.[(exactlyonce.Clerk.t), "cid"] ↦ (v.(exactlyonce.Clerk.cid')))
    (l.[(exactlyonce.Clerk.t), "cid"] ↦ cid')
    (l ↦ v) (l ↦ (v <|(exactlyonce.Clerk.cid') := cid'|>))%I.
Proof. solve_pointsto_access_struct. Qed.
#[global] Instance Clerk_access_load_seq l (v : (exactlyonce.Clerk.t)) dq :
  AccessStrict
    (l.[(exactlyonce.Clerk.t), "seq"] ↦{dq} (v.(exactlyonce.Clerk.seq')))
    (l.[(exactlyonce.Clerk.t), "seq"] ↦{dq} (v.(exactlyonce.Clerk.seq')))
    (l ↦{dq} v) (l ↦{dq} v)%I.
Proof. solve_pointsto_access_struct. Qed.

#[global] Instance Clerk_access_store_seq l (v : (exactlyonce.Clerk.t)) seq' :
  AccessStrict
    (l.[(exactlyonce.Clerk.t), "seq"] ↦ (v.(exactlyonce.Clerk.seq')))
    (l.[(exactlyonce.Clerk.t), "seq"] ↦ seq')
    (l ↦ v) (l ↦ (v <|(exactlyonce.Clerk.seq') := seq'|>))%I.
Proof. solve_pointsto_access_struct. Qed.

End def.
End Clerk.

Module VersionedStateMachine.
Section def.

Context `{!heapGS Σ}.
Context {sem : go.Semantics}.
Context {package_sem' : exactlyonce.Assumptions}.

Local Set Default Proof Using "All".

#[global]Program Instance VersionedStateMachine_typed_pointsto  :
  TypedPointsto (Σ:=Σ) (exactlyonce.VersionedStateMachine.t) :=
  {|
    typed_pointsto_def l v dq :=
      (
      "ApplyVolatile" ∷ l.[(exactlyonce.VersionedStateMachine.t), "ApplyVolatile"] ↦{dq} v.(exactlyonce.VersionedStateMachine.ApplyVolatile') ∗
      "ApplyReadonly" ∷ l.[(exactlyonce.VersionedStateMachine.t), "ApplyReadonly"] ↦{dq} v.(exactlyonce.VersionedStateMachine.ApplyReadonly') ∗
      "SetState" ∷ l.[(exactlyonce.VersionedStateMachine.t), "SetState"] ↦{dq} v.(exactlyonce.VersionedStateMachine.SetState') ∗
      "GetState" ∷ l.[(exactlyonce.VersionedStateMachine.t), "GetState"] ↦{dq} v.(exactlyonce.VersionedStateMachine.GetState') ∗
      "_" ∷ True
      )%I
  |}.
Final Obligation. solve_typed_pointsto_agree. Qed.

#[global] Instance VersionedStateMachine_into_val_typed
   :
  IntoValTypedUnderlying (exactlyonce.VersionedStateMachine.t) (exactlyonce.VersionedStateMachineⁱᵐᵖˡ).
Proof. solve_into_val_typed_struct. Qed.
#[global] Instance VersionedStateMachine_access_load_ApplyVolatile l (v : (exactlyonce.VersionedStateMachine.t)) dq :
  AccessStrict
    (l.[(exactlyonce.VersionedStateMachine.t), "ApplyVolatile"] ↦{dq} (v.(exactlyonce.VersionedStateMachine.ApplyVolatile')))
    (l.[(exactlyonce.VersionedStateMachine.t), "ApplyVolatile"] ↦{dq} (v.(exactlyonce.VersionedStateMachine.ApplyVolatile')))
    (l ↦{dq} v) (l ↦{dq} v)%I.
Proof. solve_pointsto_access_struct. Qed.

#[global] Instance VersionedStateMachine_access_store_ApplyVolatile l (v : (exactlyonce.VersionedStateMachine.t)) ApplyVolatile' :
  AccessStrict
    (l.[(exactlyonce.VersionedStateMachine.t), "ApplyVolatile"] ↦ (v.(exactlyonce.VersionedStateMachine.ApplyVolatile')))
    (l.[(exactlyonce.VersionedStateMachine.t), "ApplyVolatile"] ↦ ApplyVolatile')
    (l ↦ v) (l ↦ (v <|(exactlyonce.VersionedStateMachine.ApplyVolatile') := ApplyVolatile'|>))%I.
Proof. solve_pointsto_access_struct. Qed.
#[global] Instance VersionedStateMachine_access_load_ApplyReadonly l (v : (exactlyonce.VersionedStateMachine.t)) dq :
  AccessStrict
    (l.[(exactlyonce.VersionedStateMachine.t), "ApplyReadonly"] ↦{dq} (v.(exactlyonce.VersionedStateMachine.ApplyReadonly')))
    (l.[(exactlyonce.VersionedStateMachine.t), "ApplyReadonly"] ↦{dq} (v.(exactlyonce.VersionedStateMachine.ApplyReadonly')))
    (l ↦{dq} v) (l ↦{dq} v)%I.
Proof. solve_pointsto_access_struct. Qed.

#[global] Instance VersionedStateMachine_access_store_ApplyReadonly l (v : (exactlyonce.VersionedStateMachine.t)) ApplyReadonly' :
  AccessStrict
    (l.[(exactlyonce.VersionedStateMachine.t), "ApplyReadonly"] ↦ (v.(exactlyonce.VersionedStateMachine.ApplyReadonly')))
    (l.[(exactlyonce.VersionedStateMachine.t), "ApplyReadonly"] ↦ ApplyReadonly')
    (l ↦ v) (l ↦ (v <|(exactlyonce.VersionedStateMachine.ApplyReadonly') := ApplyReadonly'|>))%I.
Proof. solve_pointsto_access_struct. Qed.
#[global] Instance VersionedStateMachine_access_load_SetState l (v : (exactlyonce.VersionedStateMachine.t)) dq :
  AccessStrict
    (l.[(exactlyonce.VersionedStateMachine.t), "SetState"] ↦{dq} (v.(exactlyonce.VersionedStateMachine.SetState')))
    (l.[(exactlyonce.VersionedStateMachine.t), "SetState"] ↦{dq} (v.(exactlyonce.VersionedStateMachine.SetState')))
    (l ↦{dq} v) (l ↦{dq} v)%I.
Proof. solve_pointsto_access_struct. Qed.

#[global] Instance VersionedStateMachine_access_store_SetState l (v : (exactlyonce.VersionedStateMachine.t)) SetState' :
  AccessStrict
    (l.[(exactlyonce.VersionedStateMachine.t), "SetState"] ↦ (v.(exactlyonce.VersionedStateMachine.SetState')))
    (l.[(exactlyonce.VersionedStateMachine.t), "SetState"] ↦ SetState')
    (l ↦ v) (l ↦ (v <|(exactlyonce.VersionedStateMachine.SetState') := SetState'|>))%I.
Proof. solve_pointsto_access_struct. Qed.
#[global] Instance VersionedStateMachine_access_load_GetState l (v : (exactlyonce.VersionedStateMachine.t)) dq :
  AccessStrict
    (l.[(exactlyonce.VersionedStateMachine.t), "GetState"] ↦{dq} (v.(exactlyonce.VersionedStateMachine.GetState')))
    (l.[(exactlyonce.VersionedStateMachine.t), "GetState"] ↦{dq} (v.(exactlyonce.VersionedStateMachine.GetState')))
    (l ↦{dq} v) (l ↦{dq} v)%I.
Proof. solve_pointsto_access_struct. Qed.

#[global] Instance VersionedStateMachine_access_store_GetState l (v : (exactlyonce.VersionedStateMachine.t)) GetState' :
  AccessStrict
    (l.[(exactlyonce.VersionedStateMachine.t), "GetState"] ↦ (v.(exactlyonce.VersionedStateMachine.GetState')))
    (l.[(exactlyonce.VersionedStateMachine.t), "GetState"] ↦ GetState')
    (l ↦ v) (l ↦ (v <|(exactlyonce.VersionedStateMachine.GetState') := GetState'|>))%I.
Proof. solve_pointsto_access_struct. Qed.

End def.
End VersionedStateMachine.

End exactlyonce.
